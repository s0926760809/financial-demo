# fintech-chart 生产环境配置
# 这个文件包含您实际的 Quay.io 镜像配置

# 全域設定
replicaCount: 1

image:
  pullPolicy: IfNotPresent
  tag: "v1.0"

# 镜像拉取密钥（如果需要）
# 请根据您的 Quay.io 认证信息配置
imagePullSecrets: []
# 示例配置（请替换为您的实际认证信息）:
# imagePullSecrets:
#   - name: quay-pull-secret
#     dockerconfigjson: |
#       {
#         "auths": {
#           "quay.io": {
#             "username": "your-username",
#             "password": "your-password",
#             "auth": "base64-encoded-username:password"
#           }
#         }
#       }

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}
podSecurityContext: {}
securityContext: {}

# -- 前端服務設定 --
frontend:
  enabled: true
  replicaCount: 1
  image:
    repository: quay.io/s0926760809/fintech-demo/frontend
    tag: "v1.0"
  service:
    type: ClusterIP
    port: 80
    targetPort: 3000
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# --- 後端微服務設定 ---

tradingApi:
  enabled: true
  replicaCount: 1
  image:
    repository: quay.io/s0926760809/fintech-demo/trading-api
    tag: "v1.0"
  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

riskEngine:
  enabled: true
  replicaCount: 1
  image:
    repository: quay.io/s0926760809/fintech-demo/risk-engine
    tag: "v1.0"
  service:
    type: ClusterIP
    port: 8081
    targetPort: 8081
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

paymentGateway:
  enabled: true
  replicaCount: 1
  image:
    repository: quay.io/s0926760809/fintech-demo/payment-gateway
    tag: "v1.0"
  service:
    type: ClusterIP
    port: 8082
    targetPort: 8082
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

auditService:
  enabled: true
  replicaCount: 1
  image:
    repository: quay.io/s0926760809/fintech-demo/audit-service
    tag: "v1.0"
  service:
    type: ClusterIP
    port: 8083
    targetPort: 8083
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# --- 資料庫與其他依賴設定 ---
postgresql:
  enabled: false

redis:
  enabled: false

# Ingress 配置
ingress:
  enabled: true
  className: ""
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
  hosts:
    - host: fintech-demo.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api/trading
          pathType: Prefix
          service: tradingApi
        - path: /api/risk
          pathType: Prefix
          service: riskEngine
        - path: /api/payment
          pathType: Prefix
          service: paymentGateway
        - path: /api/audit
          pathType: Prefix
          service: auditService
  tls: []

# 环境变量配置
env:
  DATABASE_URL: "postgresql://fintech:password@postgresql:5432/fintech_db"
  REDIS_URL: "redis://redis:6379"
  LOG_LEVEL: "info" 